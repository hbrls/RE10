# 常用选型参考：Vue 3 + Element Plus

> 适用范围：`frontend-app-architecture-quality-review` 技能的 Vue 3 + Element Plus 项目审查补充。
>
> 使用方式：主流程以 `../SKILL.md` 为准；当项目技术栈明确为 Vue 3 + Element Plus 时，叠加本参考中的栈特化检查项。

## 1. 技术栈画像（建议基线）

-   框架：Vue 3（优先 Composition API / `<script setup>`）
-   构建：Vite
-   UI：Element Plus
-   状态管理：Pinia
-   路由：Vue Router
-   语言：TypeScript
-   网络层：Axios（统一封装）

## 2. 分层与目录建议

建议保持以下分层并约束依赖方向（上层依赖下层抽象，不反向依赖）：

```text
src/
  apis/          # API 定义与请求封装
  components/    # 通用组件
  views/         # 页面组件
  stores/        # Pinia 状态
  hooks/         # 复用逻辑（Composables）
  utils/         # 通用工具函数
```

## 3. 栈特化审查关注点

### 3.1 Build（Vite）

-   `vite.config.*` 是否按职责拆分、注释清晰。
-   环境变量是否统一通过 `import.meta.env` 读取。
-   自定义变量是否使用 `VITE_` 前缀。
-   是否区分开发/测试/生产环境，并避免环境判断散落。
-   是否锁定依赖并保留 lockfile（如 `pnpm-lock.yaml`）。

### 3.2 Base Framework（Vue 3 + TS + Element Plus）

-   是否统一使用 Composition API，避免同域逻辑混杂多范式。
-   是否正确使用 Pinia 与 Vue Router（含守卫、权限边界）。
-   Element Plus 是否通过项目封装层或规范化用法接入，避免页面级随意覆盖。
-   TypeScript 类型是否覆盖 API 入参与返回值、核心状态与事件协议。
-   是否具备统一错误处理、日志策略与配置开关。

### 3.3 Utils / Composables

-   Composables 是否以 `useXxx` 命名并职责单一。
-   是否避免在工具层直接操作 DOM 或持有组件实例。
-   响应式数据解构是否安全（避免响应性丢失）。
-   是否可单测，是否与 UI/环境强耦合。

### 3.4 业务组件

-   页面组件是否存在“过大文件/过多职责”，可否拆分子组件或下沉到 Composables。
-   Props/Emits 是否声明完整、类型明确。
-   状态流转（加载/成功/失败/空态）是否统一。
-   是否正确使用 `<script setup>`、路由守卫与错误边界。
-   Element Plus 表格/树等复杂组件是否关注性能（如虚拟滚动、大列表优化）。

### 3.5 第三方库

-   第三方 SDK 是否通过适配层封装，避免业务直调。
-   初始化时机是否可控，不阻塞首屏。
-   失败是否可降级，且不阻断关键业务流程。
-   版本是否可追踪（升级策略、回滚预案、安全公告跟踪）。

## 4. 审查流程（Vue 3 + Element Plus）

1. 项目结构分析：目录、模块边界、命名规范、循环依赖。
2. 构建配置审查：Vite、环境变量、代理、构建产物策略。
3. 架构模式评估：Composition API / Pinia / Router / TS / Element Plus 使用一致性。
4. 组件设计审查：职责单一、可复用、Props/Emits、Composables 复用。
5. 性能优化评估：渲染性能、懒加载、缓存与大列表处理。
6. 安全性审查：输入校验、路由权限、敏感信息处理、协议与通信安全。

## 5. 审查检查清单（可直接复用）

### 5.1 构建配置

-   [ ] 依赖版本可追踪且已锁定（lockfile 存在且生效）
-   [ ] `vite.config.*` 配置清晰且环境分离合理
-   [ ] 环境变量使用 `VITE_` 前缀并通过 `import.meta.env` 读取
-   [ ] 代理、别名、构建优化配置可解释且可维护

### 5.2 基础框架

-   [ ] 正确使用 Vue 3 Composition API
-   [ ] 正确使用 Pinia 状态管理
-   [ ] 正确使用 Vue Router（守卫、权限边界）
-   [ ] TypeScript 类型定义完整（API/状态/组件协议）
-   [ ] Element Plus 使用规范一致
-   [ ] 存在统一错误处理与日志系统

### 5.3 工具层

-   [ ] 工具函数/Composables 职责单一且命名清晰
-   [ ] Composables 命名以 `use` 开头
-   [ ] 避免全局状态污染与响应式误用
-   [ ] 关键工具具备可测试性

### 5.4 业务组件

-   [ ] 组件大小与复杂度可控（超阈值可拆分）
-   [ ] 组件职责单一，视图与业务逻辑分离
-   [ ] Props/Emits 定义完整
-   [ ] 正确使用 Composables 与状态管理
-   [ ] 错误和边界场景处理完整

### 5.5 第三方库

-   [ ] 第三方库有统一封装与初始化策略
-   [ ] 调用失败具备降级与恢复路径
-   [ ] 版本管理、升级与回滚策略明确
-   [ ] 关注安全、隐私与合规要求

## 6. 审查报告模板（栈特化版）

```markdown
# [项目名称] 架构质量审查报告（Vue 3 + Element Plus）

## 1. 项目概述

-   项目名称
-   技术栈
-   项目规模
-   审查日期

## 2. Build（Vite）审查

### 2.1 依赖管理

### 2.2 构建配置

### 2.3 环境配置

### 2.4 问题清单

## 3. 基础框架审查

### 3.1 Composition API 一致性

### 3.2 Pinia / Router 分层设计

### 3.3 Element Plus 使用规范

### 3.4 问题清单

## 4. 工具层审查

### 4.1 工具函数

### 4.2 Composables

### 4.3 问题清单

## 5. 业务组件审查

### 5.1 组件设计

### 5.2 状态管理

### 5.3 路由设计

### 5.4 问题清单

## 6. 第三方库审查

### 6.1 选型与封装

### 6.2 生命周期与降级

### 6.3 问题清单

## 7. 性能优化建议

## 8. 安全与合规建议

## 9. 改进优先级

## 10. 总结
```

## 7. 与主 Skill 的关系

-   主 Skill：定义“通用前端架构审查框架”（跨技术栈通用）。
-   本参考：补充“Vue 3 + Element Plus”场景下的具体检查口径。
-   实际执行时应优先遵循主 Skill，避免与主流程冲突或重复。

## 8. 执行与协作约定（来自 AGENTS）

-   写入仓库的 Markdown 文档统一使用中文。
-   当存在多个可选方案时，使用 1、2、3 编号列出。
-   新建审查会话时，先确认开发环境（Windows / Mac），再决定命令与工具策略。
-   当出现“全局”“系统梳理”等任务时，以仓库当前文件为准，不依赖历史上下文缓存。
-   加载 AGENTS 相关规则时，同步参照 README 的项目规范，确保审查口径一致。
-   审查结论落库后，对外沟通优先给出“文件路径 + 修改要点”，避免重复粘贴全文。

## 9. 审查协作角色映射（来自 AGENTS）

为避免审查盲区，建议按问题类型引入对应角色视角：

1. 功能与页面架构：前端开发专家 + 对应业务专家（电商/用户/营销）。
2. 状态与数据流：状态管理专家 + API 集成专家。
3. 性能与体积：性能优化专家。
4. 跨端与兼容：跨平台适配专家。
5. 质量与回归保障：测试质量专家。
6. 构建发布与运行稳定性：构建部署专家 + 监控运维专家。
