> updated_by: Cascade - GPT-5
> updated_at: 2026-02-13 17:32:00

# iOS 架构质量审查参考（从旧 Skill 提炼）

## 1. 适用范围

本参考用于在项目级架构审查中，补充 iOS 端（Swift/Objective-C）的专项检查点。
当你使用通用的前端架构审查技能时，可将本文作为 iOS 方向的落地清单。

## 2. 审查维度总览

iOS 架构审查建议覆盖五个维度：

1. Build（构建与依赖管理）
2. 基础框架（Base Framework）
3. Utils（工具层）
4. 业务页面（业务功能层）
5. 第三方 SDK（集成与隔离）

---

## 3. Build（构建与依赖管理）

### 3.1 审查目标

- Xcode 构建配置结构清晰、职责单一、易维护。
- 依赖版本可追踪且可复现，避免隐性升级风险。
- 开发/测试/生产配置边界清晰，减少环境错配。
- 优化编译效率，提升本地开发与 CI 效率。

### 3.2 关键检查项

- 模块与依赖：Target / Framework 划分是否合理，是否存在循环依赖。
- 配置治理：是否通过 `xcconfig` 统一管理配置，避免重复配置散落。
- 依赖治理：CocoaPods/SPM/Carthage 版本是否固定；`Podfile.lock` / `Package.resolved` 是否纳入版本管理。
- 构建渠道：Debug/Release/自定义 Scheme 与 Build Settings 是否清晰可控。
- 密钥注入：环境变量与密钥是否通过 CI Secrets 或安全配置注入。
- 安全合规：是否存在明文秘钥、敏感 URL、调试开关误入生产的问题。

---

## 4. 基础框架（Base Framework）

### 4.1 审查目标

- 架构模式（MVC/MVP/MVVM/Clean Architecture）在全局保持一致。
- 展示层/领域层/数据层边界清晰，避免“上帝类”和跨层耦合。
- 基础组件抽象稳定（如 BaseViewController、BaseViewModel、网络封装）。
- 错误处理、日志与配置体系统一。

### 4.2 关键检查项

- 架构一致性：同一模块内是否混用多种模式且缺少约束。
- 依赖方向：上层是否依赖抽象而非具体实现；展示层是否直连网络/数据源。
- 基类设计：Base 类是否仅承载通用能力，是否被滥用为“万能基类”。
- 网络与数据：是否具备统一 Repository/网络封装；重试、超时、错误处理是否可配置。
- 可观测性：日志级别是否分环境管理；是否避免输出敏感数据；是否支持按模块开关日志。
- 配置中心：常量、Feature Flag、实验开关是否集中治理，减少魔法值。

---

## 5. Utils（工具层）

### 5.1 审查目标

- 将通用能力从业务代码中抽离，提升复用与一致性。
- 避免工具层失控成为“工具黑洞”。
- 控制对 UIKit/Foundation/生命周期的耦合，降低内存与资源风险。

### 5.2 关键检查项

- 职责单一：工具类是否聚焦单领域，避免“大杂烩”。
- 命名与组织：目录和命名是否表达用途，避免 `CommonUtils`/`Utils2` 这类模糊命名。
- 全局状态：是否过度依赖静态方法与全局变量，影响可测试性与可维护性。
- 生命周期与内存：是否错误持有 `UIViewController/UIView` 强引用；定时器/通知/KVO 是否正确释放。
- 可测试性：工具方法是否可隔离单测，是否与 UI 或外部环境强耦合。

---

## 6. 业务页面（业务功能层）

### 6.1 审查目标

- 页面层（UIViewController/UIView/SwiftUI View）职责清晰，避免臃肿。
- 视图与业务逻辑分离（ViewModel/Presenter/UseCase）。
- 复杂流程下状态、导航与数据交互可控且可测试。

### 6.2 关键检查项

- 页面复杂度：单类行数/方法数是否过多，是否需要拆分子组件或下沉逻辑。
- 状态管理：加载/成功/失败/空态是否有统一模型，避免大量 if-else 状态分支。
- 逻辑分层：UI 层是否只处理展示与交互，业务规则是否沉到 ViewModel/Presenter/UseCase。
- 导航治理：跳转是否集中管理，是否存在大量硬编码路由 key。
- 列表与复杂 UI：`UITableView/UICollectionView` 复用与数据源设计是否清晰，是否存在性能瓶颈。
- 异常边界：网络失败、权限拒绝、超时、空数据是否有明确反馈和回退路径。

---

## 7. 第三方 SDK（集成与隔离）

### 7.1 审查目标

- 通过适配层/封装层隔离 SDK，避免业务直耦合。
- 保证权限申请、数据采集与隐私策略合规。
- 保持 SDK 可替换、可升级、可回滚。

### 7.2 关键检查项

- 抽象封装：业务层是否仅依赖自有接口，不直接调用 SDK API。
- 初始化时机：是否集中在 AppDelegate/SceneDelegate/独立初始化模块，避免阻塞冷启动。
- 错误降级：SDK 不可用时是否有兜底，不阻断关键业务流程。
- 版本管理：升级策略、回滚预案、安全公告跟踪是否完善。
- 权限与隐私：权限最小化、数据采集最小化，支持用户撤回授权后的降级策略（如 ATT/隐私清单）。
- 多 SDK 共存：推送/统计/支付等多 SDK 是否有统一调度，是否评估冲突与性能影响。

---

## 8. 使用建议（与新 Skill 协同）

1. 先用通用前端架构审查技能建立统一审查框架。
2. 在涉及 iOS 客户端实现时，按本文五维清单补充专项检查。
3. 输出结论时，明确区分“跨端通用问题”和“iOS 专项问题”，便于排期整改。
